<!DOCTYPE html>
<html lang="pt-BR">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Quiz Interativo - HTML, CSS e JavaScript</title>
    
    <meta
      name="description"
      content="Escolha um tema, responda as questões e mostre que você é fera no assunto!"
    />
    <meta
      property="og:title"
      content="Quiz Interativo - HTML, CSS e JavaScript"
    />
    <meta property="og:image" content="./icons/icon.png" />
    <meta property="og:image:width" content="1200" />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css"
    />
    <link rel="icon" type="image/png" href="favicon.png" />
    <link rel="stylesheet" href="style/styles.css" />
    <link rel="stylesheet" href="./style/dark-theme.css" />
  </head>
  <body>
    <main class="main">
      <header class="header">
        <a href="#" class="logo">Quiz.</a>
      </header>

      <div class="container">
        <section class="quiz-section">
          <div class="cronometro-container">
            <div id="cronometro" class="cronometro">00:00:00</div>
          </div>
          <div class="quiz-box">
            <h1 class="quiz-title">Quiz Interativo</h1>
            <div class="quiz-header">
              <span>Quiz Squad6</span>
              <span class="header-score">Pontuação: 0 / 10</span>
            </div>
            <h2 class="question-text"></h2>
            <div class="option-list">
              <div class="option">
                <span></span>
              </div>
            </div>

            <div class="quiz-footer">
              <span class="question-total">1 de 10 Questões</span>
              <button class="next-btn">Próxima</button>
            </div>
          </div>

          <div class="result-box">
            <h2>Resultado</h2>
            <div class="percentage-container">
              <div class="circular-progress">
                <span class="progress-value"> 0% </span>
              </div>
              <span class="score-text">Sua pontuação 0 de 10</span>
            </div>
            <div class="buttons">
              <button class="tryAgain-btn">Refazer</button>
              <button class="goHome-btn">Home</button>
            </div>
          </div>

          <div class="ranking-box">
            <div class="ranking-container">
              <h2>Ranking</h2>
              <table>
                <thead>
                  <tr>
                    <th>Nome do Participante</th>
                    <th>Pontuação HTML</th>
                    <th>Pontuação CSS</th>
                    <th>Pontuação JavaScript</th>
                    <th>Tempo de Resposta</th>
                    <th>Data do Quiz</th>
                  </tr>
                </thead>
                <tbody></tbody>
              </table>
            </div>
          </div>
        </section>

        <section class="home">
          <div class="home_content">
            <h1>Quiz Interativo</h1>

            <p>Insira seu nome e escolha um tema:</p>
            <div class="participant-input">
              <label for="participantName">Seu nome:</label>
              <input
                type="text"
                id="participantName"
                placeholder="Digite seu nome"
              />
            </div>
            <div class="theme-buttons">
              <button class="html-theme">HTML</button>
              <button class="css-theme">CSS</button>
              <button class="js-theme">JavaScript</button>
            </div>
            <button class="start-btn">Iniciar</button>
          </div>
        </section>
      </div>
    </main>

    <div class="popup-info">
      <h2>Vamos testar seus conhecimentos?</h2>
      <span class="info"
        >1. Somente uma das opções é a resposta correta para cada
        pergunta.</span
      >
      <span class="info">2.Analise bem as opções antes de escolher uma.</span>
      <span class="info"
        >3. Ao finalizar o quiz, verifique suas respostas, quantas questões
        acertou e errou, e o tempo decorrido.</span
      >
      <span class="info"
        >4.Além disso, ofereceremos alguns insights interessantes, como a média
        de acertos por tema e o ranking de pontuação por tema</span
      >
      <span class="info"
        >5. Se desejar, reinicie o quiz e escolha outro tema para desafiar seus
        conhecimentos novamente.</span
      >
      <span class="info"
        >Aproveite o Quiz Interativo e divirta-se testando seus conhecimentos em
        HTML, CSS e JavaScript! Boa sorte e bons estudos!</span
      >

      <div class="btn-group">
        <button class="info-btn exit-btn">Sair do Quiz</button>
        <a href="#" class="info-btn continue-btn">Continue</a>
      </div>
    </div>
    <audio class="myAudio">
      <source src="./audio-fundo/WhatsApp Audio 2023-07-26 at 22.23.34.mpeg" type="audio/mpeg" />
      Seu navegador não suporta o elemento de áudio.
    </audio>
    <button id="audioPlayer">Pause</button>

    <button class="theme-toggle" onclick="toggleTheme()">
      <span id="iconToggle"><i class="fa">&#xf185;</i></span>
    </button>

    <script type="module" src="quiz.js">
      const startBtn = document.querySelector(".start-btn");
      const popupInfo = document.querySelector(".popup-info");
      const exitBtn = document.querySelector(".exit-btn");
      const main = document.querySelector(".main");
      const continueBtn = document.querySelector(".continue-btn");
      const quizSection = document.querySelector(".quiz-section");
      const quizBox = document.querySelector(".quiz-box");
      const resultBox = document.querySelector(".result-box");
      const resultBoxContainer = document.querySelector(".result-box-container");
      const nextBtn = document.querySelector(".next-btn");
      const tryAgainBtn = document.querySelector(".tryAgain-btn");
      const goHomeBtn = document.querySelector(".goHome-btn");
      const participantNameInput = document.getElementById("participantName");
      const themeSelect = document.getElementById("themeSelect");
      const showResultsBtn = document.querySelector(".show-results-btn");

      const audio = document.querySelector(".myAudio");
      const pausebtn = document.querySelector("#audioPlayer");
      const quizhtml = document.querySelector(".html-theme");
      const quizcss = document.querySelector(".css-theme");
      const quizjs = document.querySelector(".js-theme");

      startBtn.onclick = () => {
        popupInfo.classList.add("active");
        main.classList.add("active");
      };

      exitBtn.onclick = () => {
        popupInfo.classList.remove("active");
        main.classList.remove("active");
      };

      continueBtn.onclick = () => {
        quizSection.classList.add("active");
        popupInfo.classList.remove("active");
        main.classList.remove("active");
        quizBox.classList.add("active");

        showQuestions(0);
        questionCounter(1);
        headerScore();
        audio.play().loop();
      };

      tryAgainBtn.onclick = () => {
        quizBox.classList.add("active");
        nextBtn.classList.remove("active");
        resultBox.classList.remove("active");

        questionCount = 0;
        questionNum = 1;
        userScore = 0;
        showQuestions(questionCount);
        questionCounter(questionNum);

        headerScore();
      };

      goHomeBtn.onclick = () => {
        quizSection.classList.remove("active");
        nextBtn.classList.remove("active");
        resultBox.classList.remove("active");

        questionCount = 0;
        questionNum = 1;
        userScore = 0;
        showQuestions(questionCount);
        questionCounter(questionNum);
        audio.pause();
      };

      let questionCount = 0;
      let questionNum = 1;
      let userScore = 0;

      nextBtn.onclick = () => {
        if (questionCount < questions.length - 1) {
          questionCount++;
          showQuestions(questionCount);

          questionNum++;
          questionCounter(questionNum);
          nextBtn.classList.remove("active");
        } else {
          showResultBox();
        }
      };

      let isResultsVisible = false;

      function fillResultsTable() {
        const resultTable = document.getElementById("result-table");
        const resultTableBody = resultTable.querySelector("tbody");

        resultTableBody.innerHTML = "";

        participantsData.forEach((participant) => {
          const row = document.createElement("tr");
          row.innerHTML = `
        <td>${participant.name}</td>
        <td>${participant.scores.HTML}</td>
        <td>${participant.scores.CSS}</td>
        <td>${participant.scores.JavaScript}</td>
        <td>${participant.timeTaken}</td>
        <td>${participant.date}</td>
      `;
          resultTableBody.appendChild(row);
        });

        const htmlAverage = document.getElementById("html-average");
        const cssAverage = document.getElementById("css-average");
        const javascriptAverage = document.getElementById("javascript-average");

        const totalParticipants = participantsData.length;
        const htmlTotalScore = participantsData.reduce(
          (acc, participant) => acc + participant.scores.HTML,
          0
        );
        const cssTotalScore = participantsData.reduce(
          (acc, participant) => acc + participant.scores.CSS,
          0
        );
        const javascriptTotalScore = participantsData.reduce(
          (acc, participant) => acc + participant.scores.JavaScript,
          0
        );

        const htmlAverageScore = htmlTotalScore / totalParticipants;
        const cssAverageScore = cssTotalScore / totalParticipants;
        const javascriptAverageScore = javascriptTotalScore / totalParticipants;

        htmlAverage.textContent = htmlAverageScore.toFixed(2);
        cssAverage.textContent = cssAverageScore.toFixed(2);
        javascriptAverage.textContent = javascriptAverageScore.toFixed(2);
      }

      function toggleTheme() {
        const body = document.body;
        const iconToggle = document.getElementById("iconToggle");

        if (body.classList.contains("dark-theme")) {
          body.classList.remove("dark-theme");
          body.classList.add("light-theme");
          iconToggle.innerHTML = '<i class="fa">&#xf186;</i>';
        } else {
          body.classList.remove("light-theme");
          body.classList.add("dark-theme");
          iconToggle.innerHTML = '<i class="fa">&#xf185;</i>';
        }
      }

      function loadQuestionsByTheme(theme) {
        switch (theme) {
          case "HTML":
            return htmlQuestions;
          case "CSS":
            return cssQuestions;
          case "JavaScript":
            return jsQuestions;
          default:
            return [];
        }
      }

      function showQuestions(index) {
        const questionText = document.querySelector(".question-text");
        questionText.textContent = `${questions[index].num}. ${questions[index].question}`;

        const optionList = document.querySelector(".option-list");
        optionList.innerHTML = "";

        for (let i = 0; i < questions[index].options.length; i++) {
          const option = document.createElement("div");
          option.classList.add("option");

          const span = document.createElement("span");
          span.textContent = questions[index].options[i];

          option.appendChild(span);
          optionList.appendChild(option);
        }

        const options = document.querySelectorAll(".option");
        options.forEach((option) => {
          option.addEventListener("click", () => optionSelected(option));
        });
      }

      function optionSelected(answer) {
        if (quizBox.classList.contains("active")) {
          let userAnswer = answer.textContent.trim();
          let correctAnswer = questions[questionCount].answer.trim();
          let allOptions = document.querySelectorAll(".option");

          if (userAnswer === correctAnswer) {
            answer.classList.add("correct");
            userScore += 1;
            headerScore();
          } else {
            answer.classList.add("incorrect");

            for (let i = 0; i < allOptions.length; i++) {
              if (allOptions[i].textContent.trim() === correctAnswer) {
                allOptions[i].classList.add("correct");
              }
            }
          }

          for (let i = 0; i < allOptions.length; i++) {
            allOptions[i].classList.add("disabled");
          }
          nextBtn.classList.add("active");
        }
      }

      function questionCounter(index) {
        const questionTotal = document.querySelector(".question-total");
        questionTotal.textContent = `${index} of ${questions.length} Questions`;
      }

      function headerScore() {
        const headerScoreText = document.querySelector(".header-score");
        headerScoreText.textContent = `Score: ${userScore} / ${questions.length}`;
      }

      function animateCircularProgress() {
        const circularProgress = document.querySelector(
          ".percentage-container .circular-progress"
        );
        const progressValue = document.querySelector(
          ".percentage-container .progress-value"
        );
        let progressStartValue = 0;
        let progressEndValue = (userScore / questions.length) * 100;
        let speed = 20;

        let progress = setInterval(() => {
          progressStartValue++;

          progressValue.textContent = `${progressStartValue}%`;
          circularProgress.style.background = `conic-gradient(#ff0157 ${
            progressStartValue * 3.6
          }deg, rgba(255, 255, 255, 0.1) ${progressStartValue * 3.6}deg)`;

          if (progressStartValue == progressEndValue) {
            clearInterval(progress);
          }
        }, speed);
      }

      function showResultBox() {
        quizBox.classList.remove("active");
        resultBox.classList.add("active");

        const scoreText = document.querySelector(".score-text");
        scoreText.textContent = `Sua pontuação: ${userScore} de ${questions.length}`;

        animateCircularProgress();
      }

      let questions = [
        {
          num: 1,
          question:
            "Qual é a sigla para a linguagem de marcação utilizada para criar páginas web?",
          answer: "A. HTML",
          options: ["A. HTML", "B. XHTML", "C. XML", "D. HTTP"],
        },
        {
          num: 2,
          question:
            "Qual é a função da tag <meta> no elemento <head> de um documento HTML?",
          answer: "A. Fornecer metadados sobre a página",
          options: [
            "A. Fornecer metadados sobre a página",
            "B. Definir um estilo interno para a página",
            "C.  Criar uma lista de links para outras páginas",
            "D. Incluir um arquivo de script externo",
          ],
        },
        {
          num: 3,
          question:
            "O que é o atributo 'alt' em uma tag <img> e qual é a sua importância?",
          answer:
            "C. É um atributo usado para fornecer um texto alternativo para a imagem, que é exibido quando a imagem não pode ser carregada ou lida por leitores de tela",
          options: [
            "A. É um atributo usado para especificar o tamanho da imagem em pixels",
            "B. É um atributo usado para definir o alinhamento da imagem na página",
            "C. É um atributo usado para fornecer um texto alternativo para a imagem, que é exibido quando a imagem não pode ser carregada ou lida por leitores de tela",
            "D. É um atributo usado para definir a posição da imagem em relação ao conteúdo circundante",
          ],
        },
        {
          num: 4,
          question:
            "Qual é a diferença entre os elementos HTML <span> e <div>?",
          answer:
            "A. <span> é um elemento de linha e é usado para estilizar um trecho de texto, enquanto <div> é um elemento de bloco e é usado para agrupar outros elementos e criar áreas distintas na página",
          options: [
            "A. <span> é um elemento de linha e é usado para estilizar um trecho de texto, enquanto <div> é um elemento de bloco e é usado para agrupar outros elementos e criar áreas distintas na página",
            "B. <span> é usado para criar links clicáveis, enquanto <div> é usado para formatar o texto em negrito ou itálico",
            "C. <span> é usado para criar listas ordenadas, enquanto <div> é usado para criar listas não ordenadas",
            "D. <span> é usado para incorporar conteúdo externo, como vídeos e mapas, enquanto <div> é usado para definir o título de uma página",
          ],
        },
        {
          num: 5,
          question:
            "O que é o atributo 'role' em HTML e qual é a sua finalidade?",
          answer:
            "C. É um atributo usado para informar o navegador e leitores de tela sobre a função semântica de um elemento na página",
          options: [
            "A. É um atributo usado para especificar o tamanho de um elemento em relação à tela",
            "B. É um atributo usado para estilizar elementos com bordas e sombras",
            "C. É um atributo usado para informar o navegador e leitores de tela sobre a função semântica de um elemento na página",
            "D. É um atributo usado para criar animações em elementos HTML",
          ],
        },
        {
          num: 6,
          question:
            "Qual é o elemento HTML usado para agrupar itens de menu, itens de navegação ou itens semelhantes?",
          answer: "C. <nav>",
          options: ["A. <menu>", "B. <list>", "C. <nav>", "D. <ul>"],
        },
        {
          num: 7,
          question:
            "O que é um atributo 'data-' em um elemento HTML e qual é a sua finalidade?",
          answer:
            "B. É um atributo personalizado que permite aos desenvolvedores armazenar informações adicionais nos elementos, acessíveis através do JavaScript, CSS ou outras tecnologias",
          options: [
            "A. É um atributo usado para definir uma data específica para o elemento",
            "B. É um atributo personalizado que permite aos desenvolvedores armazenar informações adicionais nos elementos, acessíveis através do JavaScript, CSS ou outras tecnologias",
            "C. É um atributo usado para especificar a cor de fundo do elemento",
            "D. É um atributo usado para definir o alinhamento do conteúdo do elemento",
          ],
        },
        {
          num: 8,
          question: "Qual é a função da tag <iframe> em HTML?",
          answer:
            "D. Incorporar conteúdo externo, como páginas de outros sites ou vídeos, dentro de uma página web",
          options: [
            "A. Criar uma área de texto multilinha para entrada do usuário",
            "B. Exibir uma lista suspensa de opções para seleção do usuário",
            "C. Mostrar uma imagem estática em uma página web",
            "D. Incorporar conteúdo externo, como páginas de outros sites ou vídeos, dentro de uma página web",
          ],
        },
        {
          num: 9,
          question:
            "Qual é a finalidade da tag <label> em relação a outros elementos HTML?",
          answer:
            "A. Associar um rótulo descritivo a um elemento de formulário, melhorando a usabilidade e acessibilidade",
          options: [
            "A. Associar um rótulo descritivo a um elemento de formulário, melhorando a usabilidade e acessibilidade",
            "B. Definir um estilo personalizado para um texto na página",
            "C. Incluir uma imagem na página",
            "D. Criar um link interno para uma seção específica da página",
          ],
        },
        {
          num: 10,
          question:
            "O que é o atributo 'contenteditable' em HTML e qual é a sua função?",
          answer:
            "B. É um atributo usado para tornar um elemento editável pelo usuário, permitindo que o conteúdo seja modificado diretamente na página",
          options: [
            "A. É um atributo usado para especificar o tipo de codificação de caracteres usada na página",
            "B. É um atributo usado para tornar um elemento editável pelo usuário, permitindo que o conteúdo seja modificado diretamente na página",
            "C. É um atributo usado para adicionar um estilo em linha ao elemento",
            "D. É um atributo usado para definir uma cor de texto para o elemento",
          ],
        },
      ];

      const participantsData = [
        {
          name: "João",
          scores: {
            HTML: 8,
            CSS: 7,
            JavaScript: 9,
          },
          timeTaken: "10 minutos",
          date: "2023-08-01",
        },
        {
          name: "Maria",
          scores: {
            HTML: 7,
            CSS: 6,
            JavaScript: 8,
          },
          timeTaken: "12 minutos",
          date: "2023-08-02",
        },
        {
          name: "Pedro",
          scores: {
            HTML: 6,
            CSS: 8,
            JavaScript: 7,
          },
          timeTaken: "8 minutos",
          date: "2023-08-03",
        },
        // Adicione mais participantes fictícios conforme necessário
      ];

      const audios = [
    "../audio-fundo/WhatsApp Audio 2023-07-26 at 22.23.34.mpeg",
    "../audio-fundo/WhatsApp Audio 2023-07-27 at 15.14.12 (1).mpeg",
    "../audio-fundo/WhatsApp Audio 2023-07-27 at 15.14.12.mpeg"
];

let tocando = true;
pausebtn.onclick = () => {
    if (tocando) {
        audio.pause();
        pausebtn.textContent = "Play";
    } else {
        audio.play();
        pausebtn.textContent = "Pause";
    }
    tocando = !tocando;
    };

    quizhtml.addEventListener("click", () => { // <- HTML
    audio.src = audios[0];
});

quizcss.addEventListener("click", () => { // <- CSS
    audio.src = audios[1];
});

quizjs.addEventListener("click", () => { // <- JS
    audio.src = audios[2];
});
    </script>
  </body>
</html>
